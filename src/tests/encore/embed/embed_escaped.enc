passive class Foo
  f : int

class Main
  f : int
  def main(): void {
    val x = new Foo();
    val y = EMBED (int)
              #{EMBED (int)
                  #{EMBED (int) 21; END};
                END};
            END;
    val z = 0;
    EMBED (void)
      int x = #{y} + 21;
      #{x.f} = x;
      #{z} = #{x.f};
      #{let z' = x.f in assertTrue(z == z')};
    END;
    EMBED (void)
      #{
      EMBED (void)
        #{this.f = 42};
      END
      };
    END;
    println("Embedding is cool: {}", this.f);
  }