def show_string(x: String): void
  if x.equals(primitive_const()) then
    print("{}: OK\n", x)
  else
    print("{} vs {}: ERROR\n", x, primitive_const())

def show_passive(x: PassiveTest): void
  if x.elem.equals(passive_const()) then
    print("{}: OK\n", x.elem)
  else
    print("{}: ERROR\n", x.elem)

def primitive_const(): String
  "Liftf Primitive Test"

def passive_const(): String
  "Liftf Passive Test"

passive class PassiveTest
  elem: String

  def init(s: String):void
    this.elem = s

class Test
  passiveTest: PassiveTest

  def init(s: String): void {
    this.passiveTest = new PassiveTest(s);
  }

  def get_string(): String
    this.passiveTest.elem

  def get_pasive(): PassiveTest
    this.passiveTest

class Main

  def test_primitive_liftf(): void
    let testContentFuture = new Test("Liftf Primitive Test")
        primitive_par = liftf(testContentFuture.get_string())
    in
        extract(primitive_par >> show_string)

  def test_passive_liftf(): void
    let test = new Test("Liftf Passive Test")
        passive_par = liftf(test.get_pasive())
    in
        extract(passive_par >> show_passive)

  def main(): void {
    this.test_primitive_liftf();
    this.test_passive_liftf();
  }
