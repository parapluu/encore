class Foo
  def foo() : String {
    val s =
      embed (embed char* end)
        char *s = encore_alloc(*_ctx, 1000);
        strcpy(s, "Hello");
        s;
      end;
    new String(s);
  }

class Main
  def main() : void {
    val x = new Foo();
    for i in [0..20] {
      val s = get x.foo();
      println("{} {}", s, i);
    };
  }