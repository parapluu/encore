-- This file was automatically converted by encorec

import Task
passive class Money
  var amount : int
  def init(i : int) : void
    this.amount = i
  end
end
class Test
  def createMoney() : Money
    new Money(4)
  end
  def update(m : Money) : Money
    m
  end
end
class Main
  def main() : void
    val t = new Test
    val t2 = new Test
    val f1 = t.createMoney()
    await(f1)
    val f2 = f1 ~~> fun (m : Money) 
                      t2.update(m) ~~> fun (m : Money) => m
                    end
    await(f2)
    val money = get(get(f2))
    println(money.amount)
  end
end

