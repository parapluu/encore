import StreamChain

class Main
  def main() : void
    let
      sio = new StreamIO
      f = \(x:int) -> x*10
      n = 5
      sa1 = sio.produceI(n)
      sb1 = chain(sa1,f)
    in {
      while (not eos sb1) {
        print(get sb1);
        sb1 = getNext sb1;
      };
    }

class StreamIO {
  stream produceI(i:A) : A
    while i>0 {
      yield i;
      i = i - 1;
    }
}
